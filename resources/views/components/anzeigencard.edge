<div class="card anzeige">
    <img src="{{asset($props.anzeige.path)}}" class="card-img-top anzeigen-image" alt="..." />
    @if($props.anzeige.status == 'sold') 
    <div class="anzeigen-status sold">
        <h3>Verkauft</h3>
    </div>
    @end
    @if($props.anzeige.status == 'inactive')
    <div class="anzeigen-status inactive">
        <h3>Inaktiv</h3>
    </div>
    @end
    <div class="card-body d-flex flex-column justify-content-between">
        <h3 class="card-title">{{ $props.anzeige.title }}</h3>
        <p class="card-text">{{$props.anzeige.description}}</p>
        <div class="d-flex flex-nowrap gap-3 align-items-center">
            @if(!$props.myListing)
            <button class="btn btn-secondary anzeigen-btn" onclick="saveListing({{$props.anzeige.id}})">
                @if($props.saved)
                <img src="{{ asset('resources/images/icons/favorite_fill.svg') }}" alt="Speicher diese Anzeige">
                @else
                <img src="{{ asset('resources/images/icons/favorite_outline.svg') }}" alt="Speicher diese Anzeige nicht mehr">
                @end
            </button>

            <a href="#" class="btn btn-secondary anzeigen-btn">
                <span class="material-symbols-outlined">chat</span>
            </a>

            @end
            <b>{{ $props.anzeige.price }}€</b>
        </div>
    </div>
    <a href='/anzeige/{{ $props.anzeige.id }}' class="stretched-link" aria-label="Erfahre mehr über diese Anzeige"></a>
</div>
<script>
    function saveListing(id) {
        console.log('clicked');
        @if ($props.saved)
            fetch(`anzeige/unsave/${id}`,
                @else
                fetch(`anzeige/save/${id}`,
                    @end
            {
                        method: 'PUT',
                        headers: {
                            'Content-Type': 'application/json',
                        }
                    }).then(response => {
                        response.status == 200 ? location.reload() : console.log('error');
                    }).catch(error => {
                        console.log('error');
                    });
    } 
</script>